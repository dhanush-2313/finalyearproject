(self.webpackChunkaidforge_frontend=self.webpackChunkaidforge_frontend||[]).push([[792],{976:(e,t,l)=>{"use strict";l(4414);var n=l(6540),r=l(5338),a=l(4371),o=l(4976),c=l(6852),s=l(2818),u=l(1738),i=l(7767),m=(l(5256),l(9146)),d=l(9632),h=l(3840),E=l(551),g=l(5353),p=l(1052),y=l(3034);const w=e=>{let{children:t}=e;const[l,r]=(0,n.useState)(!1),[a,o]=(0,n.useState)(null),[c,s]=(0,n.useState)(null),u=(0,h.dU)("gray.50","gray.800");return(0,n.useEffect)((()=>{const e=(e,t)=>{r(!0),o(e),s(t),console.error("Error caught by boundary:",e,t)};return window.addEventListener("error",e),()=>window.removeEventListener("error",e)}),[]),l?n.createElement(m.a,{minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bg:u},n.createElement(E.T,{spacing:4,textAlign:"center",p:8},n.createElement(g.D,{size:"xl"},"Oops! Something went wrong"),n.createElement(p.E,{color:(0,h.dU)("gray.600","gray.300")},"We're sorry for the inconvenience. Please try refreshing the page."),n.createElement(y.$,{colorScheme:"blue",onClick:()=>window.location.reload()},"Refresh Page"),!1)):t},f=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(113)]).then(l.bind(l,6113)))),b=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(844)]).then(l.bind(l,8844)))),A=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(577)]).then(l.bind(l,8577)))),k=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(951)]).then(l.bind(l,9951)))),z=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(490)]).then(l.bind(l,9490)))),v=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(114)]).then(l.bind(l,6114)))),q=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(946)]).then(l.bind(l,4946)))),P=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(254)]).then(l.bind(l,2254)))),S=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(607)]).then(l.bind(l,4607)))),x=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(630)]).then(l.bind(l,2630)))),C=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(137)]).then(l.bind(l,7137)))),I=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(68)]).then(l.bind(l,7068)))),B=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(868)]).then(l.bind(l,7868)))),L=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(890)]).then(l.bind(l,8890)))),O=(0,n.lazy)((()=>Promise.all([l.e(96),l.e(218)]).then(l.bind(l,7218)))),R=()=>n.createElement(s.o,{h:"100vh"},n.createElement(u.y,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})),M=e=>{let{children:t}=e;const{isAuthenticated:l,loading:r}=(0,n.useContext)(c.cy),{user:a}=(0,d.A)();return r?n.createElement(R,null):l||a?n.createElement(m.a,null,t):n.createElement(i.C5,{to:"/login",replace:!0})},$=e=>{let{children:t}=e;const{isAuthenticated:l,loading:r}=(0,n.useContext)(c.cy),{user:a}=(0,d.A)();return r?n.createElement(R,null):l||a?n.createElement(i.C5,{to:"/dashboard",replace:!0}):n.createElement(m.a,null,t)},_=()=>n.createElement(w,null,n.createElement(n.Suspense,{fallback:n.createElement(R,null)},n.createElement(i.BV,null,n.createElement(i.qh,{path:"/",element:n.createElement(x,null)}),n.createElement(i.qh,{path:"/home",element:n.createElement(f,null)}),n.createElement(i.qh,{path:"/login",element:n.createElement($,null,n.createElement(b,null))}),n.createElement(i.qh,{path:"/signup",element:n.createElement($,null,n.createElement(A,null))}),n.createElement(i.qh,{path:"/dashboard",element:n.createElement(M,null,n.createElement(k,null))}),n.createElement(i.qh,{path:"/donations",element:n.createElement(M,null,n.createElement(v,null))}),n.createElement(i.qh,{path:"/admin",element:n.createElement(M,null,n.createElement(q,null))}),n.createElement(i.qh,{path:"/field-worker",element:n.createElement(M,null,n.createElement(P,null))}),n.createElement(i.qh,{path:"/aid-received",element:n.createElement(M,null,n.createElement(S,null))}),n.createElement(i.qh,{path:"/aid-distribution",element:n.createElement(M,null,n.createElement(C,null))}),n.createElement(i.qh,{path:"/donor-tracking",element:n.createElement(M,null,n.createElement(I,null))}),n.createElement(i.qh,{path:"/refugee-access",element:n.createElement(M,null,n.createElement(B,null))}),n.createElement(i.qh,{path:"/field-workers",element:n.createElement(M,null,n.createElement(L,null))}),n.createElement(i.qh,{path:"/account-settings",element:n.createElement(M,null,n.createElement(O,null))}),n.createElement(i.qh,{path:"*",element:n.createElement(z,null)})))),F=()=>n.createElement(s.o,{h:"100vh"},n.createElement(u.y,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})),U=()=>n.createElement(n.Suspense,{fallback:n.createElement(F,null)},n.createElement(_,null)),D=document.getElementById("root");if(!D)throw new Error("Root element not found");r.createRoot(D).render(n.createElement(n.StrictMode,null,n.createElement(w,null,n.createElement(a.s,null,n.createElement(c.OJ,null,n.createElement(o.Kd,null,n.createElement(U,null)))))))},4414:(e,t,l)=>{var n=l(8287).hp;"undefined"==typeof process&&(l.g.process={env:{NODE_ENV:"production"}}),void 0===n&&(l.g.Buffer=l(8287).hp)},5256:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var n=l(6540),r=l(2818),a=l(551),o=l(1738),c=l(1052);const s=e=>{let{message:t="Loading..."}=e;return n.createElement(r.o,{minH:"200px"},n.createElement(a.T,{spacing:4},n.createElement(o.y,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"}),n.createElement(c.E,{color:"gray.600"},t)))}},6852:(e,t,l)=>{"use strict";l.d(t,{OJ:()=>s,cy:()=>c});var n=l(6540),r=l(1083),a=l(5256),o=l(7755);const c=(0,n.createContext)(null);r.A.defaults.baseURL="https://19e3-2405-201-d002-70f8-c186-c871-9a95-995c.ngrok-free.app";const s=e=>{let{children:t}=e;const[l,s]=(0,n.useState)(null),[u,i]=(0,n.useState)(!0),[m,d]=(0,n.useState)(null),[h,E]=(0,n.useState)(null),g=!!l;(0,n.useEffect)((()=>{const e=localStorage.getItem("token");e?r.A.get("/api/auth/me",{headers:{Authorization:`Bearer ${e}`}}).then((e=>{s(e.data),i(!1)})).catch((()=>{localStorage.removeItem("token"),i(!1)})):i(!1)}),[]);const p={user:l,loading:u,error:m,isAuthenticated:g,walletAddress:h,connectWallet:async()=>{try{if(!window.ethereum)throw new Error("MetaMask is not installed");new o.k(window.ethereum);const e=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];if(E(e),l)try{(await r.A.put("/api/users/update-wallet",{walletAddress:e},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.success&&s((t=>({...t,walletAddress:e})))}catch(e){console.error("Error updating wallet address:",e)}return e}catch(e){throw console.error("Failed to connect wallet:",e),e}},register:async e=>{try{d(null);const t=await r.A.post("/api/auth/register",e),{token:l,user:n}=t.data;return localStorage.setItem("token",l),s(n),{success:!0}}catch(e){return d(e.response?.data?.message||"Registration failed"),{success:!1,error:e.response?.data?.message||"Registration failed"}}},login:async e=>{try{d(null);const t=await r.A.post("/api/auth/login",e);if(t.data.requireMFA)return{requireMFA:!0,userId:t.data.userId,message:t.data.message};const{token:l,user:n}=t.data;return localStorage.setItem("token",l),s(n),{success:!0}}catch(e){const t=e.response?.data?.error||e.response?.data?.message||"Login failed";return d(t),{success:!1,error:t}}},logout:async()=>{try{const e=localStorage.getItem("token");e&&await r.A.post("/api/auth/logout",{},{headers:{Authorization:`Bearer ${e}`}})}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("token"),s(null),E(null)}}};return u?n.createElement(a.A,{message:"Authenticating..."}):n.createElement(c.Provider,{value:p},t)}},9632:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var n=l(6540),r=l(6852);const a=()=>{const e=(0,n.useContext)(r.cy);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[96],(()=>e(e.s=976))),e.O()}]);