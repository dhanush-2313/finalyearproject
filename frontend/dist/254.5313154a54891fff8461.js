"use strict";(self.webpackChunkaidforge_frontend=self.webpackChunkaidforge_frontend||[]).push([[254],{1042:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(1601),r=n.n(a),o=n(6314),l=n.n(o)()(r());l.push([e.id,'.field-worker-interface {\n  font-family: "Arial", sans-serif;\n  background-color: #f9f9f9;\n  color: #333;\n  padding: 1.5rem;\n  min-height: 100vh;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.field-worker-header {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.field-worker-header h1 {\n  font-size: 2.5rem;\n  color: #2c3e50;\n  margin-bottom: 0.5rem;\n}\n\n.field-worker-header p {\n  font-size: 1.1rem;\n  color: #7f8c8d;\n}\n\n.field-worker-main {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.tabs {\n  display: flex;\n  margin-bottom: 2rem;\n  border-bottom: 1px solid #ddd;\n  width: 100%;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.tab {\n  background: none;\n  border: none;\n  padding: 1rem 1.5rem;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 1.1rem;\n  color: #7f8c8d;\n  transition: all 0.3s ease;\n  border-bottom: 3px solid transparent;\n}\n\n.tab.active {\n  color: #3498db;\n  border-bottom: 3px solid #3498db;\n}\n\n.tab:hover:not(.active) {\n  color: #2980b9;\n  border-bottom: 3px solid #bde0ff;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n  width: 100%;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n  color: #2c3e50;\n}\n\ninput, select, textarea {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 1rem;\n}\n\nselect {\n  background-color: white;\n}\n\ntextarea {\n  resize: vertical;\n  min-height: 100px;\n}\n\n.submit-btn {\n  background-color: #3498db;\n  color: white;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: background-color 0.3s;\n  width: 100%;\n  font-size: 1.1rem;\n  margin-top: 1rem;\n}\n\n.submit-btn:hover {\n  background-color: #2980b9;\n}\n\n.submit-btn:disabled {\n  background-color: #95a5a6;\n  cursor: not-allowed;\n}\n\n.update-refugee-form,\n.submit-aid-form {\n  background-color: #fff;\n  padding: 2rem;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  width: 100%;\n}\n\n.update-refugee-form h2,\n.submit-aid-form h2 {\n  margin-bottom: 1.5rem;\n  color: #2c3e50;\n  font-size: 1.8rem;\n  border-bottom: 2px solid #eaeaea;\n  padding-bottom: 10px;\n}\n\n.success-message {\n  background-color: #d4edda;\n  color: #155724;\n  padding: 1rem;\n  border-radius: 4px;\n  margin-bottom: 1rem;\n  width: 100%;\n  text-align: center;\n  font-weight: 500;\n  border-left: 4px solid #28a745;\n}\n\n.error-message {\n  background-color: #f8d7da;\n  color: #721c24;\n  padding: 1rem;\n  border-radius: 4px;\n  margin-bottom: 1rem;\n  width: 100%;\n  text-align: center;\n  font-weight: 500;\n  border-left: 4px solid #dc3545;\n}\n\n/* Remove duplicate task styles that are now in FieldWorkerTasks.css */\n\n',""]);const i=l},1789:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(1601),r=n.n(a),o=n(6314),l=n.n(o)()(r());l.push([e.id,'.field-worker-tasks {\n  width: 100%;\n  background-color: #ffffff;\n  padding: 20px;\n  border-radius: 10px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.field-worker-tasks h2 {\n  font-size: 1.8rem;\n  color: #2c3e50;\n  margin-bottom: 20px;\n  border-bottom: 2px solid #eaeaea;\n  padding-bottom: 10px;\n}\n\n.field-worker-tasks ul {\n  list-style-type: none;\n  padding: 0;\n}\n\n.field-worker-tasks .error {\n  color: #e74c3c;\n  background-color: #fadbd8;\n  padding: 12px;\n  border-radius: 6px;\n  margin-bottom: 15px;\n  font-weight: 500;\n  border-left: 4px solid #e74c3c;\n}\n\n.task-item {\n  padding: 15px;\n  margin-bottom: 15px;\n  border-radius: 8px;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);\n  display: flex;\n  flex-direction: column;\n  transition: transform 0.2s ease-in-out;\n  border-left: 5px solid #3498db;\n}\n\n.task-item:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n.task-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.task-header strong {\n  font-size: 1.1rem;\n  color: #34495e;\n  flex: 1;\n}\n\n.task-header .status {\n  font-size: 0.85rem;\n  font-weight: 600;\n  padding: 4px 10px;\n  border-radius: 15px;\n  text-transform: uppercase;\n}\n\n.task-meta {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  font-size: 0.9rem;\n  color: #7f8c8d;\n}\n\n.task-meta span {\n  display: flex;\n  align-items: center;\n}\n\n.task-meta .date:before {\n  content: "ğŸ“…";\n  margin-right: 5px;\n}\n\n.task-meta .refugee:before {\n  content: "ğŸ‘¤";\n  margin-right: 5px;\n}\n\n/* Task status styles */\n.task-item.task-pending {\n  border-left-color: #e74c3c;\n}\n\n.task-item.task-pending .status {\n  background-color: #fadbd8;\n  color: #c0392b;\n}\n\n.task-item.task-completed {\n  border-left-color: #2ecc71;\n}\n\n.task-item.task-completed .status {\n  background-color: #d5f5e3;\n  color: #27ae60;\n}\n\n.task-item.task-in-progress {\n  border-left-color: #f39c12;\n}\n\n.task-item.task-in-progress .status {\n  background-color: #fdebd0;\n  color: #e67e22;\n}\n\n/* Loading state */\n.field-worker-tasks p:not(.error) {\n  color: #7f8c8d;\n  text-align: center;\n  padding: 20px;\n  font-style: italic;\n}\n\n',""]);const i=l},2254:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var a=n(6540),r=n(7767),o=n(6852),l=n(5072),i=n.n(l),s=n(7825),d=n.n(s),c=n(7659),m=n.n(c),u=n(5056),p=n.n(u),g=n(540),f=n.n(g),E=n(1113),b=n.n(E),h=n(1042),k={};k.styleTagTransform=b(),k.setAttributes=p(),k.insert=m().bind(null,"head"),k.domAPI=d(),k.insertStyleElement=f(),i()(h.A,k),h.A&&h.A.locals&&h.A.locals;var v=n(4801),x=n(1789),y={};y.styleTagTransform=b(),y.setAttributes=p(),y.insert=m().bind(null,"head"),y.domAPI=d(),y.insertStyleElement=f(),i()(x.A,y),x.A&&x.A.locals&&x.A.locals;const w=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null);return(0,a.useEffect)((()=>{(async()=>{try{console.log("Fetching assigned tasks...");const e=await v.rM.getAssignedTasks();console.log("API Response:",e),e.data&&e.data.tasks?t(e.data.tasks):e.data?t(e.data):t([]),l(null)}catch(e){console.error("Error fetching tasks:",e),l("Failed to fetch tasks. Please try again later."),t([{id:1,description:"Distribute food supplies in Zone A",status:"pending",dateProvided:(new Date).toISOString().split("T")[0]},{id:2,description:"Medical checkups in Zone B",status:"completed",dateProvided:(new Date).toISOString().split("T")[0]}])}finally{r(!1)}})()}),[]),a.createElement("div",{className:"field-worker-tasks"},a.createElement("h2",null,"Your Tasks"),n?a.createElement("p",null,"Loading tasks..."):o?a.createElement("p",{className:"error"},o):e.length>0?a.createElement("ul",null,e.map((e=>a.createElement("li",{key:e._id||e.id,className:`task-item task-${e.status.toLowerCase().replace(" ","-")}`},a.createElement("div",{className:"task-header"},a.createElement("strong",null,e.description),a.createElement("span",{className:"status"},e.status)),a.createElement("div",{className:"task-meta"},a.createElement("span",{className:"date"},"Date: ",new Date(e.dateProvided).toLocaleDateString()),e.refugeeId&&a.createElement("span",{className:"refugee"},"Refugee ID: ",e.refugeeId)))))):a.createElement("p",null,"No tasks assigned. Check back later for new assignments."))};var A=n(2468),S=n(551),N=n(1052),T=n(2609),D=n(2590),I=n(3738),C=n(9146),R=n(3034),F=n(7234),z=n(1738),P=n(3246),q=n(5800),U=n(548),M=n(7998),L=n(1994),O=n(9546),W=n(6771),$=n(954),V=n(5828),j=n(1904),X=n(8873);const _=()=>{const[e,t]=(0,a.useState)("tasks"),[n,r]=(0,a.useState)(!1),[o,l]=(0,a.useState)(""),[i,s]=(0,a.useState)(""),[d,c]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),p=(0,A.d)(),[g,f]=(0,a.useState)({id:"",data:{name:"",location:"",status:"",contactInfo:""}}),[E,b]=(0,a.useState)({refugeeId:"",description:"",dateProvided:(new Date).toISOString().split("T")[0],type:"",quantity:"",location:"",notes:""}),[h,k]=(0,a.useState)([]),[x,y]=(0,a.useState)(!1);(0,a.useEffect)((()=>{"aidRecords"===e&&_()}),[e]);const _=async()=>{y(!0);try{const e=await v.jb.getEnhancedAidRecords();if(!e?.data?.success)throw new Error("Failed to fetch enhanced aid records");console.log("Enhanced aid records:",e.data),k(e.data.records||[]),s("")}catch(e){console.error("Error fetching aid records:",e),s("Failed to fetch aid records: "+(e.message||"Unknown error")),k([])}finally{y(!1)}},Q=async(e,t)=>{try{u(!0);const n=["Pending","In Transit","Delivered","Verified"],a=n.indexOf(record.status);if(n.indexOf(t)!==a+1)throw new Error("Invalid status transition. Status must follow the defined sequence.");const r=await v.jb.updateAidStatus(e,t);r?.data?.success&&(p({title:"Status Updated",description:`Aid record status updated to ${t}`,status:"success",duration:3e3,isClosable:!0}),_())}catch(e){console.error("Error updating status:",e),p({title:"Update Failed",description:e.message||"Failed to update status",status:"error",duration:3e3,isClosable:!0})}finally{u(!1)}},Y=e=>{const{name:t,value:n}=e.target;f("id"===t?{...g,id:n}:{...g,data:{...g.data,[t]:n}})},Z=e=>{const{name:t,value:n}=e.target;b({...E,[t]:n})};return a.createElement("div",{className:"field-worker-interface"},a.createElement("header",{className:"field-worker-header"},a.createElement("h1",null,"Field Worker Dashboard"),a.createElement("p",null,"Manage your assigned tasks, update refugee information, and submit aid reports.")),a.createElement("div",{className:"tabs"},a.createElement("button",{className:"tasks"===e?"tab active":"tab",onClick:()=>t("tasks")},"My Tasks"),a.createElement("button",{className:"updateRefugee"===e?"tab active":"tab",onClick:()=>t("updateRefugee")},"Update Refugee Info"),a.createElement("button",{className:"submitAid"===e?"tab active":"tab",onClick:()=>t("submitAid")},"Submit Aid Report"),a.createElement("button",{className:"aidRecords"===e?"tab active":"tab",onClick:()=>t("aidRecords")},"Aid Records")),o&&a.createElement("div",{className:"success-message"},o),i&&a.createElement("div",{className:"error-message"},i),a.createElement("main",{className:"field-worker-main"},"tasks"===e&&a.createElement(w,null),"updateRefugee"===e&&a.createElement("div",{className:"update-refugee-form"},a.createElement("h2",null,"Update Refugee Information"),a.createElement("form",{onSubmit:async e=>{e.preventDefault(),r(!0),s(""),l("");try{await v.rM.updateRefugeeInfo(g),l("Refugee information updated successfully!"),f({id:"",data:{name:"",location:"",status:"",contactInfo:""}})}catch(e){s(e.response?.data?.error||"Failed to update refugee information")}finally{r(!1)}}},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"id"},"Refugee ID"),a.createElement("input",{type:"text",id:"id",name:"id",value:g.id,onChange:Y,required:!0})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"name"},"Name"),a.createElement("input",{type:"text",id:"name",name:"name",value:g.data.name,onChange:Y})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"location"},"Location"),a.createElement("input",{type:"text",id:"location",name:"location",value:g.data.location,onChange:Y})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"status"},"Status"),a.createElement("select",{id:"status",name:"status",value:g.data.status,onChange:Y},a.createElement("option",{value:""},"Select status"),a.createElement("option",{value:"Registered"},"Registered"),a.createElement("option",{value:"Verified"},"Verified"),a.createElement("option",{value:"Aid Provided"},"Aid Provided"),a.createElement("option",{value:"Relocated"},"Relocated"))),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"contactInfo"},"Contact Information"),a.createElement("input",{type:"text",id:"contactInfo",name:"contactInfo",value:g.data.contactInfo,onChange:Y})),a.createElement("button",{type:"submit",className:"submit-btn",disabled:n},n?"Updating...":"Update Refugee Info"))),"submitAid"===e&&a.createElement("div",{className:"submit-aid-form"},a.createElement("h2",null,"Submit Aid Distribution Report"),a.createElement("form",{onSubmit:async e=>{e.preventDefault(),r(!0),s(""),l("");try{const e=`${E.type} (${E.quantity}) - ${E.location}${E.notes?": "+E.notes:""}`,t={refugeeId:E.refugeeId,description:E.description||e,dateProvided:E.dateProvided};await v.rM.submitAidReport(t),l("Aid report submitted successfully!"),b({refugeeId:"",description:"",dateProvided:(new Date).toISOString().split("T")[0],type:"",quantity:"",location:"",notes:""})}catch(e){s(e.response?.data?.error||"Failed to submit aid report")}finally{r(!1)}}},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"refugeeId"},"Refugee ID"),a.createElement("input",{type:"text",id:"refugeeId",name:"refugeeId",value:E.refugeeId,onChange:Z,required:!0})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"description"},"Description"),a.createElement("input",{type:"text",id:"description",name:"description",value:E.description,onChange:Z,required:!0})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"dateProvided"},"Date Provided"),a.createElement("input",{type:"date",id:"dateProvided",name:"dateProvided",value:E.dateProvided,onChange:Z,required:!0})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"type"},"Aid Type"),a.createElement("select",{id:"type",name:"type",value:E.type,onChange:Z,required:!0},a.createElement("option",{value:""},"Select aid type"),a.createElement("option",{value:"Food"},"Food"),a.createElement("option",{value:"Medical Supplies"},"Medical Supplies"),a.createElement("option",{value:"Shelter"},"Shelter"),a.createElement("option",{value:"Clothing"},"Clothing"),a.createElement("option",{value:"Cash Assistance"},"Cash Assistance"),a.createElement("option",{value:"Other"},"Other"))),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"quantity"},"Quantity"),a.createElement("input",{type:"number",id:"quantity",name:"quantity",value:E.quantity,onChange:Z,required:!0})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"location"},"Distribution Location"),a.createElement("input",{type:"text",id:"location",name:"location",value:E.location,onChange:Z,required:!0})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"notes"},"Notes"),a.createElement("textarea",{id:"notes",name:"notes",value:E.notes,onChange:Z,rows:"4"})),a.createElement("button",{type:"submit",className:"submit-btn",disabled:n},n?"Submitting...":"Submit Aid Report"))),"aidRecords"===e&&a.createElement("div",{className:"aid-records"},a.createElement("h2",null,"Aid Records"),a.createElement("p",null,"View and manage aid distribution records."),x?a.createElement(F.s,{justify:"center",p:5},a.createElement(z.y,{size:"xl"}),a.createElement(N.E,{ml:3},"Loading aid records...")):0===h.length?a.createElement(C.a,{p:5,textAlign:"center"},a.createElement(N.E,null,"No aid records found."),a.createElement(R.$,{mt:3,colorScheme:"blue",onClick:_},"Refresh Records")):a.createElement(C.a,{overflowX:"auto"},a.createElement(P.X,{variant:"simple"},a.createElement(q.d,null,a.createElement(U.Tr,null,a.createElement(M.Th,null,"ID"),a.createElement(M.Th,null,"Donor"),a.createElement(M.Th,null,"Recipient"),a.createElement(M.Th,null,"Aid Type"),a.createElement(M.Th,null,"Amount"),a.createElement(M.Th,null,"Status"),a.createElement(M.Th,null,"Actions"))),a.createElement(L.N,null,h.map((e=>a.createElement(a.Fragment,{key:e.id},a.createElement(U.Tr,null,a.createElement(O.Td,null,e.id),a.createElement(O.Td,null,a.createElement(F.s,{align:"center"},a.createElement(W.e,{size:"xs",mr:2,src:e.donorDetails?.avatarUrl,name:e.donorDetails?.name||"Unknown"}),a.createElement(C.a,null,a.createElement(N.E,{fontWeight:"bold"},e.donorDetails?.name||"Anonymous Donor"),a.createElement(N.E,{fontSize:"xs",color:"gray.500"},e.donor)))),a.createElement(O.Td,null,a.createElement(F.s,{align:"center"},a.createElement(W.e,{size:"xs",mr:2,src:e.recipientDetails?.avatarUrl,name:e.recipientDetails?.name||"Unknown"}),a.createElement(C.a,null,a.createElement(N.E,{fontWeight:"bold"},e.recipientDetails?.name||"Anonymous Recipient"),a.createElement(N.E,{fontSize:"xs",color:"gray.500"},e.recipient)))),a.createElement(O.Td,null,e.aidType),a.createElement(O.Td,null,a.createElement(F.s,{align:"center"},a.createElement(I.I,{as:j.liQ,mr:1}),a.createElement(N.E,null,(0,X.Q9)(e.amount)," ETH"))),a.createElement(O.Td,null,a.createElement($.E,{colorScheme:"Delivered"===e.status?"green":"In Transit"===e.status?"yellow":"Verified"===e.status?"blue":"gray"},e.status)),a.createElement(O.Td,null,a.createElement(R.$,{size:"sm",colorScheme:"blue",onClick:()=>c(e)},"View Details"))),d?.id===e.id&&a.createElement(U.Tr,null,a.createElement(O.Td,{colSpan:7},a.createElement(C.a,{p:4,bg:"gray.50",borderRadius:"md"},(e=>{const t=["Pending","In Transit","Delivered","Verified"],n=t.indexOf(e.status);return a.createElement(S.T,{spacing:2,align:"stretch",mt:2},a.createElement(N.E,{fontWeight:"bold"},"Delivery Progress:"),a.createElement(T.z,{spacing:4},t.map(((e,r)=>a.createElement(a.Fragment,{key:e},a.createElement(S.T,null,a.createElement(D.j,{size:"40px",bg:r<=n?"green.500":"gray.200",color:"white"},a.createElement(I.I,{as:"Pending"===e?j.w_X:"In Transit"===e?j.dv1:"Delivered"===e?j.TXh:j.A7C})),a.createElement(N.E,{fontSize:"sm"},e)),r<t.length-1&&a.createElement(C.a,{flex:1,h:"2px",bg:r<n?"green.500":"gray.200"}))))),"Verified"!==e.status&&a.createElement(R.$,{mt:2,colorScheme:"blue",size:"sm",isLoading:m,onClick:()=>{const a=t[n+1];a&&Q(e.id,a)}},"Update to ",t[n+1]))})(e),a.createElement(V.x,{templateColumns:"repeat(2, 1fr)",gap:4,mt:4},a.createElement(C.a,null,a.createElement(N.E,{fontWeight:"bold"},"Recipient Details:"),a.createElement(N.E,null,"Location:"," ",e.recipientDetails?.location||"N/A"),a.createElement(N.E,null,"Contact:"," ",e.recipientDetails?.contact||"N/A"),a.createElement(N.E,null,"Family Size:"," ",e.recipientDetails?.familySize||"N/A")),a.createElement(C.a,null,a.createElement(N.E,{fontWeight:"bold"},"Delivery Details:"),a.createElement(N.E,null,"Date:"," ",(0,X.x5)(e.timestamp)),a.createElement(N.E,null,"Method:"," ",e.deliveryMethod||"Standard"),a.createElement(N.E,null,"Notes:"," ",e.notes||"No additional notes")))))))))))))))};var Q=n(7479),Y={};Y.styleTagTransform=b(),Y.setAttributes=p(),Y.insert=m().bind(null,"head"),Y.domAPI=d(),Y.insertStyleElement=f(),i()(Q.A,Y),Q.A&&Q.A.locals&&Q.A.locals;const Z=()=>{const{isAuthenticated:e,user:t}=(0,a.useContext)(o.cy);return e?"fieldWorker"!==t?.role?a.createElement(r.C5,{to:"/dashboard"}):a.createElement("div",{className:"field-worker-page"},a.createElement("h1",null,"Field Worker Dashboard"),a.createElement("p",{className:"field-worker-description"},"Manage your assigned tasks and update refugee information"),a.createElement(_,null)):a.createElement(r.C5,{to:"/login"})}},7479:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(1601),r=n.n(a),o=n(6314),l=n.n(o)()(r());l.push([e.id,".field-worker-page {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 2rem;\n  }\n  \n  .field-worker-page h1 {\n    color: #2c3e50;\n    margin-bottom: 0.5rem;\n    font-size: 2.5rem;\n  }\n  \n  .field-worker-description {\n    color: #7f8c8d;\n    font-size: 1.1rem;\n    margin-bottom: 2rem;\n  }\n  ",""]);const i=l}}]);