"use strict";(self.webpackChunkaidforge_frontend=self.webpackChunkaidforge_frontend||[]).push([[844],{8844:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var r=a(6540),n=a(9290),l=a(5958),c=a(5353),i=a(1052),s=a(3840),o=a(9146),m=a(4466),d=a(6944),u=a(7584),g=a(6277),E=a(1570),p=a(536),b=a(8129),y=a(7176),f=a(3034),h=a(4284),w=a(3237),S=a(1164),x=a(7767),v=a(4976),C=a(6852),M=a(551),k=a(2609),F=a(5577),z=a(8575);const B=e=>{let{userId:t,onSuccess:a,onCancel:n}=e;const[l,E]=(0,r.useState)(""),[p,b]=(0,r.useState)(""),[y,h]=(0,r.useState)(!1),w=(0,s.dU)("white","gray.800"),S=(0,s.dU)("gray.200","gray.700");return r.createElement(o.a,{p:6,bg:w,borderWidth:"1px",borderColor:S,borderRadius:"lg",boxShadow:"md"},r.createElement(M.T,{spacing:6,align:"stretch"},r.createElement(c.D,{size:"lg",textAlign:"center"},"Two-Factor Authentication"),r.createElement(i.E,null,"Please enter the 6-digit verification code from your authenticator app to continue."),p&&r.createElement(m.F,{status:"error",borderRadius:"md"},r.createElement(d._,null),p),r.createElement(u.MJ,null,r.createElement(g.l,{textAlign:"center"},"Verification Code"),r.createElement(k.z,{justify:"center"},r.createElement(F.c,{otp:!0,size:"lg",value:l,onChange:e=>{E(e)},placeholder:""},r.createElement(F.M,null),r.createElement(F.M,null),r.createElement(F.M,null),r.createElement(F.M,null),r.createElement(F.M,null),r.createElement(F.M,null)))),r.createElement(k.z,{justify:"center",spacing:4,pt:4},r.createElement(f.$,{variant:"outline",onClick:n,disabled:y},"Back"),r.createElement(f.$,{colorScheme:"blue",onClick:async()=>{if(l&&6===l.length){h(!0),b("");try{const e=await(0,z.yD)(t,l);e.success?"function"==typeof a&&a():b(e.error||"Verification failed. Please try again.")}catch(e){b("Failed to verify code. Please try again."),console.error("MFA verification error:",e)}finally{h(!1)}}else b("Please enter a valid 6-digit verification code")},isLoading:y,loadingText:"Verifying..."},"Verify"))))},P=()=>{const[e,t]=(0,r.useState)({email:"",password:""}),[a,M]=(0,r.useState)(!1),[k,F]=(0,r.useState)(""),[z,P]=(0,r.useState)(!1),[U,A]=(0,r.useState)(!1),[R,_]=(0,r.useState)(null),{login:q,error:D}=(0,r.useContext)(C.cy),W=(0,x.Zp)(),L=e=>{const{name:a,value:r}=e.target;t((e=>({...e,[a]:r})))};return U?r.createElement(n.m,{maxW:"lg",py:{base:"12",md:"24"},px:{base:"0",sm:"8"}},r.createElement(B,{userId:R,onSuccess:async()=>{W("/dashboard")},onCancel:()=>{A(!1),_(null)}})):r.createElement(n.m,{maxW:"lg",py:{base:"12",md:"24"},px:{base:"0",sm:"8"}},r.createElement(l.B,{spacing:"8"},r.createElement(l.B,{spacing:"6",textAlign:"center"},r.createElement(c.D,{size:{base:"xl",md:"2xl"}},"Welcome back"),r.createElement(i.E,{color:(0,s.dU)("gray.600","gray.400")},"Enter your email and password to access your account")),r.createElement(o.a,{py:{base:"0",sm:"8"},px:{base:"4",sm:"10"},bg:(0,s.dU)("white","gray.800"),boxShadow:{base:"none",sm:"md"},borderRadius:{base:"none",sm:"xl"}},r.createElement("form",{onSubmit:async t=>{t.preventDefault(),F(""),P(!0);try{const t=await q(e);if(t.requireMFA)return A(!0),_(t.userId),void P(!1);t.success?W("/dashboard"):F(t.error||"Login failed. Please try again.")}catch(e){F(e.message||"Login failed. Please try again.")}finally{P(!1)}}},r.createElement(l.B,{spacing:"6"},(k||D)&&r.createElement(m.F,{status:"error",borderRadius:"md"},r.createElement(d._,null),k||D),r.createElement(l.B,{spacing:"5"},r.createElement(u.MJ,{isRequired:!0},r.createElement(g.l,{htmlFor:"email"},"Email"),r.createElement(E.p,{id:"email",name:"email",type:"email",autoComplete:"email",value:e.email,onChange:L,required:!0,disabled:z})),r.createElement(u.MJ,{isRequired:!0},r.createElement(g.l,{htmlFor:"password"},"Password"),r.createElement(p.M,null,r.createElement(E.p,{id:"password",name:"password",type:a?"text":"password",autoComplete:"current-password",value:e.password,onChange:L,required:!0,disabled:z}),r.createElement(b.t,{h:"full"},r.createElement(y.K,{variant:"ghost",onClick:()=>M((e=>!e)),icon:a?r.createElement(w.t,null):r.createElement(S.O,null),"aria-label":a?"Hide password":"Show password",disabled:z}))))),r.createElement(l.B,{spacing:"6"},r.createElement(f.$,{type:"submit",colorScheme:"blue",size:"lg",fontSize:"md",isLoading:z,loadingText:"Signing in...",disabled:z},"Sign in"),r.createElement(l.B,{spacing:"4",direction:"row",align:"center",justify:"center"},r.createElement(i.E,{color:(0,s.dU)("gray.600","gray.400")},"Don't have an account?"),r.createElement(h.N,{as:v.N_,to:"/signup",color:(0,s.dU)("blue.500","blue.200"),fontWeight:"semibold",_hover:{color:(0,s.dU)("blue.600","blue.300")}},"Sign up"))))))))}}}]);