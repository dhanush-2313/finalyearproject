"use strict";(self.webpackChunkaidforge_frontend=self.webpackChunkaidforge_frontend||[]).push([[946],{4946:(e,t,a)=>{a.r(t),a.d(t,{default:()=>me});var l=a(6540),r=a(7767),n=a(3840),o=a(9146),s=a(7234),c=a(3738),i=a(4812),d=a(5773),m=a(2709),u=a(208),E=a(2468),p=a(9637),g=a(9290),h=a(5353),f=a(3034),y=a(1738),b=a(5828),A=a(3812),T=a(1082),w=a(7069),S=a(63),C=a(6808),v=a(536),k=a(8129),D=a(1570),x=a(3246),M=a(5800),U=a(548),W=a(7998),I=a(1994),$=a(9546),F=a(954),R=a(4044),j=a(3609),N=a(7205),P=a(5444),z=a(1194),J=a(5323),H=a(551),O=a(7584),X=a(6277),L=a(5187),V=a(714),K=a(770),_=a(4927),B=a(895),Q=a(4154),Z=a(0),q=a(2280),G=a(913),Y=a(5958),ee=a(6843),te=a(9744),ae=a(1835),le=a(1904),re=a(9632),ne=a(1698),oe=a(8873),se=a(2392),ce=a(4801),ie=a(6598);const de=e=>{let{title:t,value:a,icon:r,helpText:E,colorScheme:p="blue"}=e;const g=(0,n.dU)("white","gray.800"),h=(0,n.dU)("gray.200","gray.700"),f=(0,n.dU)(`${p}.500`,`${p}.200`);return l.createElement(o.a,{p:6,bg:g,borderRadius:"lg",borderWidth:"1px",borderColor:h,shadow:"lg"},l.createElement(s.s,{alignItems:"center",mb:2},l.createElement(c.I,{as:r,w:8,h:8,color:f,mr:3}),l.createElement(i.r,null,l.createElement(d.v,{fontSize:"md",fontWeight:"medium"},t),l.createElement(m.k,{fontSize:"2xl",fontWeight:"bold"},a),E&&l.createElement(u.h,{color:(0,n.dU)("gray.600","gray.400")},E))))},me=()=>{const{isAuthenticated:e,user:t}=(0,re.A)(),a=(0,r.Zp)(),i=(0,E.d)(),d=(0,n.dU)("gray.50","gray.900"),m=(0,n.dU)("gray.200","gray.700"),u=(0,n.dU)("white","gray.800"),[me,ue]=(0,l.useState)([]),[Ee,pe]=(0,l.useState)([]),[ge,he]=(0,l.useState)([]),[fe,ye]=(0,l.useState)([]),[be,Ae]=(0,l.useState)([]),[Te,we]=(0,l.useState)({totalUsers:0,totalDonations:0,totalAid:0,activeProjects:0}),[Se,Ce]=(0,l.useState)(!0),[ve,ke]=(0,l.useState)(!0),[De,xe]=(0,l.useState)(!0),[Me,Ue]=(0,l.useState)(!0),[We,Ie]=(0,l.useState)(null),[$e,Fe]=(0,l.useState)(""),[Re,je]=(0,l.useState)(!1),{isOpen:Ne,onOpen:Pe,onClose:ze}=(0,p.j)(),{isOpen:Je,onOpen:He,onClose:Oe}=(0,p.j)(),[Xe,Le]=(0,l.useState)(null),[Ve,Ke]=(0,l.useState)(null),[_e,Be]=(0,l.useState)({name:"",email:"",role:"donor",walletAddress:"",password:""}),Qe=l.useRef(),[Ze,qe]=(0,l.useState)(null),[Ge,Ye]=(0,l.useState)(!1),[et,tt]=(0,l.useState)({recipient:"",aidType:"",amount:"",fieldWorker:""}),[at,lt]=(0,l.useState)([]),rt=async()=>{try{ke(!0);const e=await ce.Er.getUsers();e?.data?Array.isArray(e.data)?ue(e.data):e.data.users&&Array.isArray(e.data.users)?ue(e.data.users):"object"==typeof e.data?(console.log("Users response format:",e.data),ue(Array.isArray(e.data)?e.data:[])):ue([]):ue([])}catch(e){console.error("Error fetching users:",e),ue([]),i({title:"Error",description:"Failed to load users data",status:"error",duration:3e3,isClosable:!0})}finally{ke(!1)}},nt=async()=>{try{Ue(!0);const e=await ce.jb.getLatestTransactions();if(e?.data){let t=[];Array.isArray(e.data)?t=e.data:e.data.transactions&&Array.isArray(e.data.transactions)&&(t=e.data.transactions);const a=t.map(((e,t)=>{if(!e.timestamp){const t=new Date,a=new Date(t);a.setDate(a.getDate()-1);const l=Math.random()<.5?t:a;l.setHours(Math.floor(24*Math.random())),l.setMinutes(Math.floor(60*Math.random())),l.setSeconds(Math.floor(60*Math.random())),e.timestamp=l.getTime()}return e}));he(a)}else he([])}catch(e){console.error("Error fetching transactions:",e),he([])}finally{Ue(!1)}},ot=async()=>{try{const e=await ce.jb.getEnhancedAidRecords();e?.data?e.data.records&&Array.isArray(e.data.records)?ye(e.data.records):Array.isArray(e.data)?ye(e.data):(console.log("Aid records response format:",e.data),ye([])):ye([])}catch(e){console.error("Error fetching aid records:",e),ye([])}},st=async()=>{try{const e=await ce.Er.getAllDonations();if(e?.data){let t=[];Array.isArray(e.data)?t=e.data:e.data.donations&&Array.isArray(e.data.donations)?t=e.data.donations:"object"==typeof e.data&&(console.log("Donations response format:",e.data),t=[]);const a=t.map(((e,t)=>{if(e.id||(e.id=e._id||e.transactionId||`DON-${Date.now()}-${t}`),!e.timestamp&&!e.date){const t=new Date,a=new Date(t);a.setDate(a.getDate()-1);const l=Math.random()<.5?t:a;l.setHours(Math.floor(24*Math.random())),l.setMinutes(Math.floor(60*Math.random())),l.setSeconds(Math.floor(60*Math.random())),e.timestamp=l.getTime()}return e}));Ae(a)}else Ae([])}catch(e){console.error("Error fetching donations:",e),Ae([])}},ct=async()=>{try{Ce(!0);const e=await ce.Er.getUserStats(),t=await ce.Er.getDonationStats(),a=await ce.jb.getAidStats();let l={totalUsers:0};e?.data&&(e.data.stats?l=e.data.stats:void 0!==e.data.totalUsers&&(l=e.data));let r={totalDonations:0};t?.data&&(t.data.stats?r=t.data.stats:void 0!==t.data.totalDonations&&(r=t.data));let n={totalAid:"0",activeProjects:0};a?.data&&(a.data.stats?n=a.data.stats:void 0!==a.data.totalAid&&(n=a.data)),we({totalUsers:l.totalUsers||0,totalDonations:r.totalDonations||0,totalAid:Number(n.totalAid).toFixed(4),activeProjects:n.activeProjects||0})}catch(e){console.error("Error fetching stats:",e),we({totalUsers:0,totalDonations:0,totalAid:"0.0000",activeProjects:0})}finally{Ce(!1)}},it=async(e,t)=>{try{je(!0);const a=i({title:"Updating Status",description:`Updating aid record status to ${t}...`,status:"info",duration:null,isClosable:!1}),l=await ce.jb.updateAidStatus(e,t);l?.data?.success&&(l.data.txHash?(i.update(a,{description:"Waiting for blockchain confirmation..."}),await pollForConfirmation(l.data.txHash)?i.update(a,{title:"Status Updated",description:`Aid record status updated to ${t} and confirmed on blockchain`,status:"success",duration:5e3,isClosable:!0}):i.update(a,{title:"Update Pending",description:"Transaction submitted but confirmation is taking longer than expected",status:"warning",duration:1e4,isClosable:!0})):i.update(a,{title:"Status Updated",description:`Aid record status updated to ${t} (tracked off-chain)`,status:"success",duration:5e3,isClosable:!0}),await Promise.all([ot(),ct(),nt()]))}catch(e){console.error("Error updating status:",e),i({title:"Update Failed",description:e.message||"Failed to update status",status:"error",duration:5e3,isClosable:!0})}finally{je(!1)}};(0,l.useEffect)((()=>{e&&"admin"===t?.role&&(ct(),rt(),(async()=>{try{xe(!0);const e=await ce.Er.getLogs();e?.data?Array.isArray(e.data)?pe(e.data):e.data.logs&&Array.isArray(e.data.logs)?pe(e.data.logs):"object"==typeof e.data?(console.log("Logs response format:",e.data),pe([])):pe([]):(pe([]),i({title:"No Logs Available",description:"Unable to fetch system logs. Please try again later.",status:"warning",duration:3e3,isClosable:!0}))}catch(e){console.error("Error fetching logs:",e),pe([]),i({title:"Error",description:"Failed to load system logs. Please check your connection.",status:"error",duration:3e3,isClosable:!0})}finally{xe(!1)}})(),nt(),ot(),st(),dt())}),[e,t]);const dt=async()=>{try{const e=await ce.Er.getUsers();if(e?.data){const t=Array.isArray(e.data)?e.data.filter((e=>"fieldWorker"===e.role&&e.isVerified)):e.data.users?e.data.users.filter((e=>"fieldWorker"===e.role&&e.isVerified)):[];lt(t)}}catch(e){console.error("Error fetching field workers:",e),i({title:"Error",description:"Failed to load field workers. Please try again.",status:"error",duration:3e3,isClosable:!0})}},mt=e=>{Le(e),Be({name:e.name||"",email:e.email||"",role:e.role||"donor",walletAddress:e.walletAddress||"",password:""}),Pe()},ut=e=>{Ke(e),He()},Et=e=>{const{name:t,value:a}=e.target;Be({..._e,[t]:a})},pt=Array.isArray(me)?me.filter((e=>e.name?.toLowerCase().includes($e.toLowerCase())||e.email?.toLowerCase().includes($e.toLowerCase())||e.role?.toLowerCase().includes($e.toLowerCase()))):[];return e?"admin"!==t?.role?l.createElement(r.C5,{to:"/dashboard"}):l.createElement(o.a,{minH:"100vh",bg:d},l.createElement(g.m,{maxW:"container.xl",py:8},l.createElement(s.s,{justifyContent:"space-between",alignItems:"center",mb:6},l.createElement(h.D,{size:"lg",color:(0,n.dU)("gray.700","white")},"Admin Dashboard"),l.createElement(f.$,{leftIcon:l.createElement(le.Pcn,null),colorScheme:"gray",variant:"outline",onClick:()=>a("/account-settings")},"Settings")),l.createElement(ne.A,null),Se?l.createElement(s.s,{justify:"center",align:"center",h:"200px"},l.createElement(y.y,{size:"xl"})):l.createElement(b.x,{templateColumns:{base:"repeat(1, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(4, 1fr)"},gap:6,mb:8},l.createElement(de,{title:"Total Users",value:(0,ie.A)(Te.totalUsers),icon:le.YXz,helpText:"Registered on platform",colorScheme:"blue"}),l.createElement(de,{title:"Total Donations",value:(0,ie.A)(Te.totalDonations),icon:le._oH,helpText:"Contributions received",colorScheme:"green"}),l.createElement(de,{title:"Aid Distributed",value:(0,ie.A)(Te.totalAid)+" ETH",icon:le.liQ,helpText:"Value of aid given",colorScheme:"purple"}),l.createElement(de,{title:"Active Projects",value:(0,ie.A)(Te.activeProjects),icon:le.t69,helpText:"Currently running",colorScheme:"orange"})),l.createElement(A.t,{variant:"enclosed",colorScheme:"blue"},l.createElement(T.w,null,l.createElement(w.o,null,l.createElement(c.I,{as:le.YXz,mr:2})," Users"),l.createElement(w.o,null,l.createElement(c.I,{as:le.G5b,mr:2})," Field Workers"),l.createElement(w.o,null,l.createElement(c.I,{as:le._oH,mr:2})," Donations"),l.createElement(w.o,null,l.createElement(c.I,{as:le.OKX,mr:2})," Transactions"),l.createElement(w.o,null,l.createElement(c.I,{as:le.t69,mr:2})," Aid Records")),l.createElement(S.T,null,l.createElement(C.K,null,l.createElement(o.a,{bg:u,borderRadius:"lg",borderWidth:"1px",borderColor:m,p:6,shadow:"md"},l.createElement(s.s,{justify:"space-between",align:"center",mb:4},l.createElement(h.D,{size:"md"},"User Management"),l.createElement(f.$,{leftIcon:l.createElement(le.NPy,null),colorScheme:"green",onClick:()=>{Le(null),Be({name:"",email:"",role:"donor",walletAddress:"",password:""}),Pe()}},"Add User")),l.createElement(v.M,{mb:4},l.createElement(k.W,{pointerEvents:"none"},l.createElement(c.I,{as:le.KSO,color:"gray.400"})),l.createElement(D.p,{placeholder:"Search users by name, email or role",value:$e,onChange:e=>Fe(e.target.value)})),ve?l.createElement(s.s,{justify:"center",py:10},l.createElement(y.y,{size:"lg"})):l.createElement(o.a,{overflowX:"auto"},l.createElement(x.X,{variant:"simple"},l.createElement(M.d,null,l.createElement(U.Tr,null,l.createElement(W.Th,null,"Name"),l.createElement(W.Th,null,"Email"),l.createElement(W.Th,null,"Role"),l.createElement(W.Th,null,"Status"),l.createElement(W.Th,null,"Joined Date"),l.createElement(W.Th,null,"Actions"))),l.createElement(I.N,null,pt.length>0?pt.map((e=>l.createElement(U.Tr,{key:e.id},l.createElement($.Td,{fontWeight:"medium"},(0,ie.A)(e.name)),l.createElement($.Td,null,(0,ie.A)(e.email)),l.createElement($.Td,null,l.createElement(F.E,{colorScheme:"admin"===e.role?"purple":"donor"===e.role?"green":"fieldWorker"===e.role?"blue":"orange"},(0,ie.A)(e.role))),l.createElement($.Td,null,l.createElement(F.E,{colorScheme:e.active?"green":"red"},e.active?"Active":"Inactive")),l.createElement($.Td,null,(0,oe.x5)(e.createdAt)),l.createElement($.Td,null,l.createElement(f.$,{leftIcon:l.createElement(le.xvZ,null),colorScheme:"blue",size:"sm",mr:2,onClick:()=>mt(e)},"Edit"),l.createElement(f.$,{leftIcon:l.createElement(le.Dby,null),colorScheme:"red",size:"sm",onClick:()=>ut(e)},"Delete"))))):l.createElement(U.Tr,null,l.createElement($.Td,{colSpan:6,textAlign:"center",py:4},'No users found matching "',$e,'"'))))))),l.createElement(C.K,null,l.createElement(o.a,{bg:u,borderRadius:"lg",borderWidth:"1px",borderColor:m,p:6,shadow:"md"},l.createElement(s.s,{justify:"space-between",align:"center",mb:4},l.createElement(h.D,{size:"md"},"Field Worker Management"),l.createElement(f.$,{leftIcon:l.createElement(le.NPy,null),colorScheme:"green",onClick:()=>{Le(null),Be({name:"",email:"",role:"fieldWorker",walletAddress:"",password:""}),Pe()}},"Add Field Worker")),l.createElement(v.M,{mb:4},l.createElement(k.W,{pointerEvents:"none"},l.createElement(c.I,{as:le.KSO,color:"gray.400"})),l.createElement(D.p,{placeholder:"Search field workers by name or email",value:$e,onChange:e=>Fe(e.target.value)})),ve?l.createElement(s.s,{justify:"center",py:10},l.createElement(y.y,{size:"lg"})):l.createElement(o.a,{overflowX:"auto"},l.createElement(x.X,{variant:"simple"},l.createElement(M.d,null,l.createElement(U.Tr,null,l.createElement(W.Th,null,"Name"),l.createElement(W.Th,null,"Email"),l.createElement(W.Th,null,"Status"),l.createElement(W.Th,null,"Joined Date"),l.createElement(W.Th,null,"Actions"))),l.createElement(I.N,null,pt.length>0?pt.filter((e=>"fieldWorker"===e.role)).map((e=>l.createElement(U.Tr,{key:e.id},l.createElement($.Td,{fontWeight:"medium"},(0,ie.A)(e.name)),l.createElement($.Td,null,(0,ie.A)(e.email)),l.createElement($.Td,null,l.createElement(F.E,{colorScheme:e.active?"green":"red"},e.active?"Active":"Inactive")),l.createElement($.Td,null,(0,oe.x5)(e.createdAt)),l.createElement($.Td,null,l.createElement(f.$,{leftIcon:l.createElement(le.xvZ,null),colorScheme:"blue",size:"sm",mr:2,onClick:()=>mt(e)},"Edit"),l.createElement(f.$,{leftIcon:l.createElement(le.Dby,null),colorScheme:"red",size:"sm",onClick:()=>ut(e)},"Delete"))))):l.createElement(U.Tr,null,l.createElement($.Td,{colSpan:6,textAlign:"center",py:4},'No field workers found matching "',$e,'"'))))))),l.createElement(C.K,null,l.createElement(o.a,{bg:u,borderRadius:"lg",borderWidth:"1px",borderColor:m,p:6,shadow:"md"},l.createElement(h.D,{size:"md",mb:4},"Donation Records"),l.createElement(o.a,{overflowX:"auto"},l.createElement(x.X,{variant:"simple"},l.createElement(M.d,null,l.createElement(U.Tr,null,l.createElement(W.Th,null,"ID"),l.createElement(W.Th,null,"Donor"),l.createElement(W.Th,null,"Amount"),l.createElement(W.Th,null,"Cause"),l.createElement(W.Th,null,"Date"),l.createElement(W.Th,null,"Status"),l.createElement(W.Th,null,"Actions"))),l.createElement(I.N,null,be.length>0?be.map((e=>l.createElement(U.Tr,{key:e.id},l.createElement($.Td,null,(0,ie.A)(e.id)),l.createElement($.Td,null,(0,ie.A)(e.donorName||e.donorId)),l.createElement($.Td,null,(0,ie.A)((0,oe.Q9)(e.amount))," ETH"),l.createElement($.Td,null,(0,ie.A)(e.cause)),l.createElement($.Td,null,(0,oe.x5)(e.timestamp||e.date)),l.createElement($.Td,null,l.createElement(F.E,{colorScheme:"Completed"===e.status?"green":"Pending"===e.status?"yellow":"red"},(0,ie.A)(e.status||"Processing"))),l.createElement($.Td,null,l.createElement(f.$,{colorScheme:"blue",size:"sm",leftIcon:l.createElement(le._oH,null),onClick:()=>(async e=>{try{const t=await ce.Er.getUsers();if(t?.data){const e=Array.isArray(t.data)?t.data.filter((e=>"fieldWorker"===e.role&&e.isVerified)):t.data.users?t.data.users.filter((e=>"fieldWorker"===e.role&&e.isVerified)):[];lt(e)}qe(e),tt({recipient:"",aidType:e.cause||"General Aid",amount:e.amount,fieldWorker:""}),Ye(!0)}catch(e){console.error("Error fetching field workers:",e),i({title:"Error",description:"Failed to load field workers",status:"error",duration:3e3,isClosable:!0})}})(e),isDisabled:"Completed"===e.status},"Assign Aid"))))):l.createElement(U.Tr,null,l.createElement($.Td,{colSpan:7,textAlign:"center",py:4},"No donation records found")))))),l.createElement(R.aF,{isOpen:Ge,onClose:()=>Ye(!1)},l.createElement(j.m,null),l.createElement(N.$,null,l.createElement(P.r,null,"Assign Aid"),l.createElement(z.s,null),l.createElement(J.c,null,l.createElement(H.T,{spacing:4},l.createElement(O.MJ,{isRequired:!0},l.createElement(X.l,null,"Recipient Address"),l.createElement(D.p,{placeholder:"0x...",value:et.recipient,onChange:e=>tt({...et,recipient:e.target.value})})),l.createElement(O.MJ,{isRequired:!0},l.createElement(X.l,null,"Aid Type"),l.createElement(D.p,{value:et.aidType,onChange:e=>tt({...et,aidType:e.target.value})})),l.createElement(O.MJ,{isRequired:!0},l.createElement(X.l,null,"Amount (ETH)"),l.createElement(v.M,null,l.createElement(k.W,null,l.createElement(c.I,{as:le.liQ,color:"gray.500"})),l.createElement(D.p,{value:(0,oe.Q9)(et.amount),isReadOnly:!0}))),l.createElement(O.MJ,{isRequired:!0},l.createElement(X.l,null,"Assign Field Worker"),l.createElement(L.l,{placeholder:"Select field worker",value:et.fieldWorker,onChange:e=>tt({...et,fieldWorker:e.target.value})},at.map((e=>l.createElement("option",{key:e.id,value:e.walletAddress},e.name," (",e.email,")"))))))),l.createElement(V.j,null,l.createElement(f.$,{variant:"ghost",mr:3,onClick:()=>Ye(!1)},"Cancel"),l.createElement(f.$,{colorScheme:"blue",onClick:async()=>{try{if(!(et.recipient&&et.fieldWorker&&et.aidType&&et.amount))return void i({title:"Missing Fields",description:"Please fill in all required fields",status:"error",duration:3e3,isClosable:!0});const e=await ce.jb.addAidRecord({recipient:et.recipient,aidType:et.aidType,amount:et.amount,addedBy:et.fieldWorker,paymentMethod:"ETH",paymentDetails:""});if(e?.data?.success){if(e.data.recordId||e.data.id,Ze?.id)try{await ce.Er.updateDonation(Ze.id,{status:"Assigned",assignedTo:et.fieldWorker})}catch(e){console.error("Error updating donation status:",e)}i({title:"Aid Assigned",description:"Aid record has been created and assigned successfully",status:"success",duration:3e3,isClosable:!0}),Ye(!1),await ot(),await st()}}catch(e){i({title:"Assignment Failed",description:e.message||"Failed to assign aid",status:"error",duration:3e3,isClosable:!0})}}},"Assign Aid"))))),l.createElement(C.K,null,l.createElement(o.a,{bg:u,borderRadius:"lg",borderWidth:"1px",borderColor:m,p:6,shadow:"md"},l.createElement(h.D,{size:"md",mb:4},"Blockchain Transactions"),Me?l.createElement(s.s,{justify:"center",py:10},l.createElement(y.y,{size:"lg"})):l.createElement(o.a,{overflowX:"auto"},l.createElement(x.X,{variant:"simple"},l.createElement(M.d,null,l.createElement(U.Tr,null,l.createElement(W.Th,null,"Transaction Hash"),l.createElement(W.Th,null,"Type"),l.createElement(W.Th,null,"Status"),l.createElement(W.Th,null,"Timestamp"),l.createElement(W.Th,null,"Details"))),l.createElement(I.N,null,ge.length>0?ge.map((e=>l.createElement(U.Tr,{key:e.id||e.txHash},l.createElement($.Td,{fontFamily:"monospace"},e.txHash?e.txHash.substring(0,10)+"...":"N/A"),l.createElement($.Td,null,(0,ie.A)(e.type)),l.createElement($.Td,null,l.createElement(F.E,{colorScheme:"CONFIRMED"===e.status?"green":"PENDING"===e.status?"yellow":"red"},(0,ie.A)(e.status))),l.createElement($.Td,null,(0,oe.x5)(e.timestamp)),l.createElement($.Td,null,l.createElement(f.$,{leftIcon:l.createElement(le.__w,null),colorScheme:"blue",size:"sm"},"View"))))):l.createElement(U.Tr,null,l.createElement($.Td,{colSpan:5,textAlign:"center",py:4},"No transaction records found"))))))),l.createElement(C.K,null,l.createElement(o.a,{bg:u,borderRadius:"lg",borderWidth:"1px",borderColor:m,p:6,shadow:"md"},l.createElement(h.D,{size:"md",mb:4},"Aid Distribution Records"),l.createElement(o.a,{overflowX:"auto"},l.createElement(x.X,{variant:"simple"},l.createElement(M.d,null,l.createElement(U.Tr,null,l.createElement(W.Th,null,"ID"),l.createElement(W.Th,null,"Recipient"),l.createElement(W.Th,null,"Amount"),l.createElement(W.Th,null,"Aid Type"),l.createElement(W.Th,null,"Status"),l.createElement(W.Th,null,"Date"),l.createElement(W.Th,null,"Actions"))),l.createElement(I.N,null,fe.length>0?fe.map((e=>l.createElement(U.Tr,{key:e.id},l.createElement($.Td,null,(0,ie.A)(e.id)),l.createElement($.Td,null,l.createElement(s.s,{align:"center"},l.createElement(se.A,{address:e.recipient}))),l.createElement($.Td,null,(0,ie.A)((0,oe.Q9)(e.amount))," ETH"),l.createElement($.Td,null,(0,ie.A)(e.aidType)),l.createElement($.Td,null,l.createElement(K.W,null,l.createElement(_.I,{as:f.$,rightIcon:l.createElement(ae.D,null),colorScheme:"Delivered"===e.status?"green":"Pending"===e.status?"yellow":"blue",size:"sm",isLoading:Re},e.status),l.createElement(B.c,null,l.createElement(Q.D,{onClick:()=>it(e.id,"Pending")},"Pending"),l.createElement(Q.D,{onClick:()=>it(e.id,"In Transit")},"In Transit"),l.createElement(Q.D,{onClick:()=>it(e.id,"Delivered")},"Delivered"),l.createElement(Q.D,{onClick:()=>it(e.id,"Verified")},"Verified")))),l.createElement($.Td,null,(0,oe.x5)(e.timestamp)),l.createElement($.Td,null,l.createElement(f.$,{colorScheme:"blue",size:"sm",leftIcon:l.createElement(le.__w,null)},"Details"))))):l.createElement(U.Tr,null,l.createElement($.Td,{colSpan:7,textAlign:"center",py:4},"No aid records found"))))))),l.createElement(C.K,null,l.createElement(b.x,{templateColumns:{base:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},gap:6},l.createElement(Z.E,null,l.createElement(q.Z,{bg:u,shadow:"md"},l.createElement(G.b,null,l.createElement(h.D,{size:"md",mb:4},"System Settings"),l.createElement(Y.B,{spacing:4},l.createElement(O.MJ,null,l.createElement(X.l,null,"Platform Name"),l.createElement(D.p,{defaultValue:"AidForge"})),l.createElement(O.MJ,null,l.createElement(X.l,null,"Admin Contact Email"),l.createElement(D.p,{defaultValue:"admin@aidforge.org"})),l.createElement(O.MJ,{display:"flex",alignItems:"center"},l.createElement(X.l,{mb:"0"},"Maintenance Mode"),l.createElement(ee.d,{colorScheme:"red"})),l.createElement(O.MJ,{display:"flex",alignItems:"center"},l.createElement(X.l,{mb:"0"},"Debug Mode"),l.createElement(ee.d,{colorScheme:"blue"})),l.createElement(f.$,{colorScheme:"blue",leftIcon:l.createElement(le.dIn,null)},"Save Settings"))))),l.createElement(Z.E,null,l.createElement(q.Z,{bg:u,shadow:"md",mb:6},l.createElement(G.b,null,l.createElement(h.D,{size:"md",mb:4},"Blockchain Configuration"),l.createElement(Y.B,{spacing:4},l.createElement(O.MJ,null,l.createElement(X.l,null,"Network"),l.createElement(L.l,{defaultValue:"ropsten"},l.createElement("option",{value:"mainnet"},"Ethereum Mainnet"),l.createElement("option",{value:"ropsten"},"Ropsten Testnet"),l.createElement("option",{value:"rinkeby"},"Rinkeby Testnet"),l.createElement("option",{value:"polygon"},"Polygon"))),l.createElement(O.MJ,null,l.createElement(X.l,null,"Contract Address"),l.createElement(D.p,{defaultValue:"0x1234...5678",fontFamily:"monospace"})),l.createElement(O.MJ,{display:"flex",alignItems:"center"},l.createElement(X.l,{mb:"0"},"Auto-Sync"),l.createElement(ee.d,{defaultChecked:!0,colorScheme:"green"})),l.createElement(f.$,{colorScheme:"blue",leftIcon:l.createElement(le.liQ,null)},"Update Network")))),l.createElement(q.Z,{bg:u,shadow:"md"},l.createElement(G.b,null,l.createElement(h.D,{size:"md",mb:4},"Backup & Recovery"),l.createElement(Y.B,{spacing:4},l.createElement(f.$,{colorScheme:"blue",leftIcon:l.createElement(le.l1U,null)},"Export Database"),l.createElement(f.$,{colorScheme:"green",leftIcon:l.createElement(le.pXu,null)},"Backup Keys"))))))))),l.createElement(R.aF,{isOpen:Ne,onClose:ze},l.createElement(j.m,null),l.createElement(N.$,null,l.createElement(P.r,null,Xe?"Edit User":"Add New User"),l.createElement(z.s,null),l.createElement(J.c,null,l.createElement(Y.B,{spacing:4},l.createElement(O.MJ,null,l.createElement(X.l,null,"Full Name"),l.createElement(D.p,{name:"name",value:_e.name,onChange:Et})),l.createElement(O.MJ,null,l.createElement(X.l,null,"Email"),l.createElement(D.p,{name:"email",value:_e.email,onChange:Et,type:"email"})),l.createElement(O.MJ,null,l.createElement(X.l,null,"Role"),l.createElement(L.l,{name:"role",value:_e.role,onChange:Et},l.createElement("option",{value:"donor"},"Donor"),l.createElement("option",{value:"fieldWorker"},"Field Worker"),l.createElement("option",{value:"refugee"},"Refugee"),l.createElement("option",{value:"admin"},"Administrator"))),l.createElement(O.MJ,null,l.createElement(X.l,null,"Password"),l.createElement(D.p,{name:"password",value:_e.password,onChange:Et,type:"password",placeholder:"Enter password"})),l.createElement(O.MJ,null,l.createElement(X.l,null,"Wallet Address (Optional)"),l.createElement(D.p,{name:"walletAddress",value:_e.walletAddress,onChange:Et,placeholder:"0x..."})))),l.createElement(V.j,null,l.createElement(f.$,{mr:3,onClick:ze},"Cancel"),l.createElement(f.$,{colorScheme:"blue",onClick:async()=>{try{if(Xe){const e=await ce.Er.updateUser(Xe.id,_e);e?.data?.success&&(i({title:"Success",description:"User updated successfully",status:"success",duration:3e3,isClosable:!0}),rt())}else{let e;e="fieldWorker"===_e.role?await ce.Er.createFieldWorker({name:_e.name,email:_e.email,password:_e.password||"defaultPassword123",walletAddress:_e.walletAddress}):await ce.Er.createUser({..._e,password:_e.password||"defaultPassword123"}),(e?.data?.success||201===e?.status)&&(i({title:"Success",description:("fieldWorker"===_e.role?"Field worker":"User")+" created successfully",status:"success",duration:3e3,isClosable:!0}),rt())}ze()}catch(e){console.error("Error submitting user:",e),i({title:"Error",description:e.response?.data?.message||e.response?.data?.error||"Failed to submit user data",status:"error",duration:3e3,isClosable:!0})}}},Xe?"Save Changes":"Add User")))),l.createElement(te.Lt,{isOpen:Je,leastDestructiveRef:Qe,onClose:Oe},l.createElement(j.m,null,l.createElement(te.EO,null,l.createElement(P.r,{fontSize:"lg",fontWeight:"bold"},"Delete User"),l.createElement(J.c,null,"Are you sure you want to delete ",Ve?(0,ie.A)(Ve.name):"","? This action cannot be undone."),l.createElement(V.j,null,l.createElement(f.$,{ref:Qe,onClick:Oe},"Cancel"),l.createElement(f.$,{colorScheme:"red",onClick:async()=>{try{if(Ve){let e;"fieldWorker"===Ve.role?(e=await ce.Er.deleteFieldWorker(Ve.id),(200===e?.status||e?.data?.message)&&(i({title:"Success",description:"Field worker deleted successfully",status:"success",duration:3e3,isClosable:!0}),rt())):(e=await ce.Er.deleteUser(Ve.id),e?.data?.success&&(i({title:"Success",description:"User deleted successfully",status:"success",duration:3e3,isClosable:!0}),rt()))}Oe()}catch(e){console.error("Error deleting user:",e),i({title:"Error",description:e.response?.data?.message||e.response?.data?.error||"Failed to delete user",status:"error",duration:3e3,isClosable:!0})}},ml:3},"Delete"))))))):l.createElement(r.C5,{to:"/login"})}}}]);